<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Hunter Association — Fight Predictor System</title>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Share+Tech+Mono&family=Exo+2:ital,wght@0,300;0,400;0,600;0,700;1,400&display=swap" rel="stylesheet"/>
<style>
/* ══════════════════════════════════════════════════
   HUNTER ASSOCIATION — FIGHT PREDICTOR
   Aesthetic: Classified dossier × Nen terminal
   Dark base, electric blue data, crimson accents
═══════════════════════════════════════════════════ */
:root {
  --void:      #05060a;
  --deep:      #090b12;
  --surface:   #0d1018;
  --panel:     #111520;
  --card:      #141926;
  --border:    #1c2438;
  --border2:   #243050;
  --blue:      #3b9eff;
  --blue-dim:  #1a4a7a;
  --blue-glow: rgba(59,158,255,0.15);
  --gold:      #f0a500;
  --gold-dim:  rgba(240,165,0,0.15);
  --crimson:   #e53935;
  --crimson-g: rgba(229,57,53,0.15);
  --teal:      #00e5cc;
  --purple:    #9c27b0;
  --green:     #00c853;
  --text:      #c8d8f0;
  --muted:     #4a5a78;
  --dim:       #1e2a40;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  background: var(--void);
  color: var(--text);
  font-family: 'Exo 2', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Hex grid background */
body::before {
  content: '';
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='104' viewBox='0 0 60 104'%3E%3Cpath d='M30 2 L58 18 L58 50 L30 66 L2 50 L2 18 Z' fill='none' stroke='%231c2438' stroke-width='0.5'/%3E%3Cpath d='M30 54 L58 70 L58 102 L30 118 L2 102 L2 70 Z' fill='none' stroke='%231c2438' stroke-width='0.5'/%3E%3C/svg%3E");
  opacity: 0.4;
}

.app { position: relative; z-index: 1; max-width: 1300px; margin: 0 auto; padding: 0 20px 80px; }

/* ══ HEADER ═════════════════════════════════════════ */
.site-header {
  text-align: center;
  padding: 48px 20px 36px;
  position: relative;
}

.site-header::after {
  content: '';
  display: block;
  width: 200px; height: 1px;
  background: linear-gradient(90deg, transparent, var(--blue), transparent);
  margin: 20px auto 0;
}

.header-eyebrow {
  font-family: 'Share Tech Mono', monospace;
  font-size: 10px;
  letter-spacing: 4px;
  color: var(--blue);
  text-transform: uppercase;
  margin-bottom: 10px;
  opacity: 0.8;
}

.header-title {
  font-family: 'Cinzel', serif;
  font-size: clamp(24px, 5vw, 48px);
  font-weight: 900;
  letter-spacing: 2px;
  background: linear-gradient(135deg, #fff 0%, var(--blue) 50%, var(--gold) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  line-height: 1.2;
  margin-bottom: 8px;
  text-shadow: none;
}

.header-sub {
  font-family: 'Share Tech Mono', monospace;
  font-size: 11px;
  color: var(--muted);
  letter-spacing: 2px;
}

/* ══ NEN TYPE REFERENCE ══════════════════════════════ */
.nen-legend {
  display: flex; flex-wrap: wrap; justify-content: center; gap: 8px;
  margin-bottom: 36px;
}

.nen-chip {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 4px 12px;
  border-radius: 3px;
  border: 1px solid transparent;
  font-family: 'Share Tech Mono', monospace;
  font-size: 11px;
  letter-spacing: 0.5px;
}

/* ══ ARENA (two-column fighter inputs) ═══════════════ */
.arena {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 0;
  margin-bottom: 32px;
  align-items: start;
}

@media (max-width: 900px) {
  .arena { grid-template-columns: 1fr; }
  .vs-divider { padding: 16px 0; }
}

/* ══ FIGHTER CARD ════════════════════════════════════ */
.fighter-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  transition: border-color 0.3s, box-shadow 0.3s;
}

.fighter-card.f1 { border-top: 3px solid var(--blue); }
.fighter-card.f2 { border-top: 3px solid var(--crimson); }

.fighter-card.f1:focus-within { border-color: var(--blue); box-shadow: 0 0 32px rgba(59,158,255,0.1); }
.fighter-card.f2:focus-within { border-color: var(--crimson); box-shadow: 0 0 32px rgba(229,57,53,0.1); }

.card-header {
  padding: 18px 20px 14px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 10px;
}

.fighter-num {
  font-family: 'Cinzel', serif;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 2px;
  text-transform: uppercase;
  padding: 3px 10px;
  border-radius: 3px;
}

.f1 .fighter-num { background: rgba(59,158,255,0.15); color: var(--blue); border: 1px solid rgba(59,158,255,0.3); }
.f2 .fighter-num { background: rgba(229,57,53,0.15); color: var(--crimson); border: 1px solid rgba(229,57,53,0.3); }

.card-body { padding: 20px; }

/* Input fields */
.field { margin-bottom: 14px; }

.field-label {
  display: block;
  font-family: 'Share Tech Mono', monospace;
  font-size: 9px;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 5px;
}

.field-input, .field-select {
  width: 100%;
  padding: 9px 12px;
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 6px;
  color: var(--text);
  font-family: 'Share Tech Mono', monospace;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.f1 .field-input:focus, .f1 .field-select:focus {
  border-color: var(--blue);
  box-shadow: 0 0 0 3px rgba(59,158,255,0.1);
}

.f2 .field-input:focus, .f2 .field-select:focus {
  border-color: var(--crimson);
  box-shadow: 0 0 0 3px rgba(229,57,53,0.1);
}

.field-select option { background: var(--panel); }

/* Stat slider row */
.stat-row {
  display: flex; align-items: center; gap: 10px;
  margin-bottom: 10px;
}

.stat-label {
  font-family: 'Share Tech Mono', monospace;
  font-size: 10px;
  color: var(--muted);
  letter-spacing: 1px;
  width: 96px;
  flex-shrink: 0;
  text-transform: uppercase;
}

.stat-slider {
  flex: 1;
  -webkit-appearance: none;
  height: 4px;
  border-radius: 2px;
  background: var(--dim);
  outline: none;
  cursor: pointer;
}

.f1 .stat-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: var(--blue);
  box-shadow: 0 0 8px rgba(59,158,255,0.5);
  cursor: pointer;
  transition: transform 0.1s;
}
.f1 .stat-slider::-webkit-slider-thumb:hover { transform: scale(1.3); }

.f2 .stat-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: var(--crimson);
  box-shadow: 0 0 8px rgba(229,57,53,0.5);
  cursor: pointer;
  transition: transform 0.1s;
}
.f2 .stat-slider::-webkit-slider-thumb:hover { transform: scale(1.3); }

.stat-value {
  font-family: 'Share Tech Mono', monospace;
  font-size: 13px;
  font-weight: 600;
  width: 30px;
  text-align: right;
  flex-shrink: 0;
}

.f1 .stat-value { color: var(--blue); }
.f2 .stat-value { color: var(--crimson); }

.stats-section-title {
  font-family: 'Share Tech Mono', monospace;
  font-size: 9px;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: var(--muted);
  margin: 18px 0 12px;
  display: flex; align-items: center; gap: 8px;
}

.stats-section-title::after {
  content: ''; flex: 1; height: 1px;
  background: var(--border2);
}

/* ══ VS DIVIDER ═══════════════════════════════════════ */
.vs-divider {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 0 24px;
  gap: 8px;
  min-height: 200px;
}

.vs-text {
  font-family: 'Cinzel', serif;
  font-size: 32px;
  font-weight: 900;
  color: var(--gold);
  text-shadow: 0 0 20px rgba(240,165,0,0.4);
  letter-spacing: 4px;
}

.vs-line { width: 1px; flex: 1; background: var(--border); max-height: 80px; }

/* ══ SIMULATE BUTTON ════════════════════════════════ */
.simulate-wrap {
  display: flex; justify-content: center;
  margin-bottom: 40px;
}

.simulate-btn {
  position: relative;
  padding: 16px 60px;
  background: transparent;
  border: 2px solid var(--gold);
  border-radius: 6px;
  color: var(--gold);
  font-family: 'Cinzel', serif;
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 4px;
  text-transform: uppercase;
  cursor: pointer;
  overflow: hidden;
  transition: all 0.3s;
  box-shadow: 0 0 20px rgba(240,165,0,0.1);
}

.simulate-btn::before {
  content: '';
  position: absolute; inset: 0;
  background: var(--gold);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 0.3s ease;
  z-index: -1;
}

.simulate-btn:hover { color: var(--void); box-shadow: 0 0 40px rgba(240,165,0,0.3); }
.simulate-btn:hover::before { transform: scaleX(1); }

.simulate-btn:disabled {
  opacity: 0.4; cursor: not-allowed;
  border-color: var(--muted); color: var(--muted);
  box-shadow: none;
}
.simulate-btn:disabled::before { display: none; }

/* ══ RESULT PANEL ═══════════════════════════════════ */
#result-panel {
  display: none;
  animation: panelReveal 0.5s cubic-bezier(0.16,1,0.3,1);
}

@keyframes panelReveal {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── Winner Banner ── */
.winner-banner {
  text-align: center;
  padding: 40px 20px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  margin-bottom: 24px;
  position: relative;
  overflow: hidden;
}

.winner-banner::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse 80% 60% at 50% 50%, rgba(240,165,0,0.07) 0%, transparent 70%);
  pointer-events: none;
}

.winner-eyebrow {
  font-family: 'Share Tech Mono', monospace;
  font-size: 10px;
  letter-spacing: 4px;
  color: var(--gold);
  text-transform: uppercase;
  margin-bottom: 10px;
  opacity: 0.8;
}

.winner-name {
  font-family: 'Cinzel', serif;
  font-size: clamp(28px, 6vw, 56px);
  font-weight: 900;
  letter-spacing: 2px;
  margin-bottom: 8px;
  text-shadow: 0 0 40px currentColor;
}

.winner-name.blue   { color: var(--blue); }
.winner-name.red    { color: var(--crimson); }

.winner-verdict {
  font-family: 'Share Tech Mono', monospace;
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 2px;
  margin-bottom: 24px;
}

/* Score comparison bar */
.score-bars {
  display: flex; gap: 12px; align-items: center;
  max-width: 600px; margin: 0 auto;
}

.score-bar-wrap {
  flex: 1;
  display: flex; flex-direction: column; gap: 6px;
}

.score-bar-label {
  font-family: 'Cinzel', serif;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 1px;
}

.f1-color { color: var(--blue); }
.f2-color { color: var(--crimson); }

.score-bar-track {
  height: 8px; background: var(--dim); border-radius: 4px; overflow: hidden;
}

.score-bar-fill {
  height: 100%; border-radius: 4px;
  transition: width 1s cubic-bezier(0.16,1,0.3,1);
  width: 0%;
}

.f1-fill { background: linear-gradient(90deg, var(--blue-dim), var(--blue)); box-shadow: 0 0 8px rgba(59,158,255,0.4); }
.f2-fill { background: linear-gradient(90deg, #7a1515, var(--crimson)); box-shadow: 0 0 8px rgba(229,57,53,0.4); }

.score-number {
  font-family: 'Share Tech Mono', monospace;
  font-size: 22px;
  font-weight: 600;
}

.score-vs-sep {
  font-family: 'Cinzel', serif;
  color: var(--gold);
  font-size: 14px;
  font-weight: 700;
  flex-shrink: 0;
}

.win-prob {
  margin-top: 16px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 13px;
  color: var(--muted);
  letter-spacing: 1px;
}

.win-prob span { color: var(--gold); font-size: 16px; font-weight: 700; }

/* ── Nen Advantage Notice ── */
.nen-advantage-notice {
  display: none;
  margin-bottom: 20px;
  padding: 14px 20px;
  background: rgba(240,165,0,0.07);
  border: 1px solid rgba(240,165,0,0.25);
  border-radius: 8px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 12px;
  color: var(--gold);
  letter-spacing: 0.5px;
  line-height: 1.6;
  text-align: center;
}

.nen-advantage-notice.visible { display: block; }

/* ── Two-column breakdown ── */
.breakdown-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 20px;
}

@media (max-width: 700px) { .breakdown-grid { grid-template-columns: 1fr; } }

.breakdown-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
}

.bd-header {
  padding: 12px 16px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  font-family: 'Cinzel', serif;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 1px;
  display: flex; align-items: center; gap: 8px;
}

.bd-header.blue { border-left: 3px solid var(--blue); }
.bd-header.red  { border-left: 3px solid var(--crimson); }

.bd-body { padding: 14px 16px; }

.bd-stat-row {
  display: flex; align-items: center; gap: 8px;
  margin-bottom: 9px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 11px;
}

.bd-stat-name { color: var(--muted); width: 110px; flex-shrink: 0; letter-spacing: 0.5px; text-transform: uppercase; }
.bd-stat-val  { width: 26px; text-align: right; flex-shrink: 0; }
.bd-stat-weight { color: var(--muted); font-size: 10px; width: 40px; flex-shrink: 0; }
.bd-stat-contrib { text-align: right; margin-left: auto; font-size: 12px; font-weight: 600; }

.bd-stat-bar-track { flex: 1; height: 3px; background: var(--dim); border-radius: 2px; overflow: hidden; }
.bd-stat-bar-fill  { height: 100%; border-radius: 2px; transition: width 0.8s ease; }
.blue .bd-stat-bar-fill { background: var(--blue); }
.red  .bd-stat-bar-fill { background: var(--crimson); }

.bd-divider {
  height: 1px; background: var(--border); margin: 10px 0;
}

.bd-total-row {
  display: flex; justify-content: space-between; align-items: center;
  font-family: 'Share Tech Mono', monospace;
  font-size: 12px;
  padding-top: 4px;
}

.bd-total-label { color: var(--muted); letter-spacing: 1px; text-transform: uppercase; }
.bd-total-val { font-size: 18px; font-weight: 700; }
.blue .bd-total-val { color: var(--blue); }
.red  .bd-total-val { color: var(--crimson); }

/* Nen multiplier row */
.bd-nen-row {
  display: flex; justify-content: space-between;
  font-family: 'Share Tech Mono', monospace;
  font-size: 11px;
  color: var(--gold);
  margin-top: 6px;
}

/* ── Calculation Log ── */
.calc-log {
  background: var(--deep);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 20px;
}

.calc-log-header {
  padding: 12px 16px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  font-family: 'Share Tech Mono', monospace;
  font-size: 10px;
  letter-spacing: 3px;
  color: var(--teal);
  text-transform: uppercase;
  display: flex; align-items: center; gap: 8px;
}

.calc-log-header::before {
  content: '●';
  color: var(--green);
  animation: blink 1.5s step-end infinite;
}

@keyframes blink { 50% { opacity: 0; } }

.calc-log-body {
  padding: 16px;
  font-family: 'Share Tech Mono', monospace;
  font-size: 12px;
  line-height: 2;
  max-height: 400px;
  overflow-y: auto;
}

.log-line {
  display: flex; gap: 12px;
  opacity: 0;
  animation: logLineIn 0.2s ease forwards;
}

@keyframes logLineIn {
  from { opacity: 0; transform: translateX(-4px); }
  to   { opacity: 1; transform: translateX(0); }
}

.log-prefix { color: var(--teal); flex-shrink: 0; user-select: none; }
.log-text   { color: var(--text); flex: 1; }
.log-text.dim    { color: var(--muted); }
.log-text.blue   { color: var(--blue); }
.log-text.red    { color: var(--crimson); }
.log-text.gold   { color: var(--gold); }
.log-text.green  { color: var(--green); }
.log-text.teal   { color: var(--teal); }

/* scrollbar */
.calc-log-body::-webkit-scrollbar { width: 4px; }
.calc-log-body::-webkit-scrollbar-track { background: transparent; }
.calc-log-body::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

/* ── Stat Comparison Radar-style bars ── */
.stat-comparison {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
}

.stat-cmp-header {
  padding: 12px 16px;
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  font-family: 'Cinzel', serif;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 2px;
  color: var(--muted);
  text-transform: uppercase;
}

.stat-cmp-body { padding: 16px; display: flex; flex-direction: column; gap: 10px; }

.cmp-row { display: flex; align-items: center; gap: 10px; }
.cmp-label { font-family: 'Share Tech Mono', monospace; font-size: 10px; color: var(--muted); width: 100px; letter-spacing: 1px; text-transform: uppercase; flex-shrink: 0; text-align: right; }
.cmp-bars  { flex: 1; display: flex; flex-direction: column; gap: 3px; }

.cmp-bar-f1, .cmp-bar-f2 {
  height: 5px; border-radius: 3px;
  transition: width 0.8s cubic-bezier(0.16,1,0.3,1);
  width: 0%;
}

.cmp-bar-f1 { background: var(--blue); box-shadow: 0 0 6px rgba(59,158,255,0.4); }
.cmp-bar-f2 { background: var(--crimson); box-shadow: 0 0 6px rgba(229,57,53,0.4); }

.cmp-vals {
  font-family: 'Share Tech Mono', monospace;
  font-size: 11px;
  display: flex; flex-direction: column; gap: 3px;
  align-items: flex-start;
  width: 40px; flex-shrink: 0;
}

.cmp-v1 { color: var(--blue); }
.cmp-v2 { color: var(--crimson); }

/* ══ NEN TYPE STYLES ════════════════════════════════ */
.nen-Enhancement   { color: #ff7043; border-color: rgba(255,112,67,0.3); background: rgba(255,112,67,0.08); }
.nen-Emission      { color: #ffb300; border-color: rgba(255,179,0,0.3);  background: rgba(255,179,0,0.08); }
.nen-Transmutation { color: #00e5ff; border-color: rgba(0,229,255,0.3);  background: rgba(0,229,255,0.08); }
.nen-Conjuration   { color: #69f0ae; border-color: rgba(105,240,174,0.3);background: rgba(105,240,174,0.08); }
.nen-Manipulation  { color: #e040fb; border-color: rgba(224,64,251,0.3); background: rgba(224,64,251,0.08); }
.nen-Specialization{ color: #f0a500; border-color: rgba(240,165,0,0.3);  background: rgba(240,165,0,0.08); }

/* ══ RESET BTN ════════════════════════════════════ */
.reset-wrap { display: flex; justify-content: center; margin-top: 32px; }

.reset-btn {
  padding: 10px 32px;
  background: transparent;
  border: 1px solid var(--border2);
  border-radius: 6px;
  color: var(--muted);
  font-family: 'Share Tech Mono', monospace;
  font-size: 12px;
  letter-spacing: 2px;
  cursor: pointer;
  transition: all 0.2s;
}

.reset-btn:hover { border-color: var(--blue); color: var(--blue); }

/* ══ DRAW RESULT ══════════════════════════════════ */
.draw-banner {
  text-align: center;
  font-family: 'Cinzel', serif;
  font-size: 32px;
  font-weight: 900;
  color: var(--gold);
  letter-spacing: 4px;
  padding: 12px 0;
  text-shadow: 0 0 30px rgba(240,165,0,0.4);
}
</style>
</head>
<body>
<div class="app">

<!-- ══ HEADER ══════════════════════════════════════════════ -->
<header class="site-header">
  <div class="header-eyebrow">▸ HUNTER ASSOCIATION — CLASSIFIED SYSTEM ◂</div>
  <h1 class="header-title">FIGHT PREDICTOR</h1>
  <div class="header-sub">COMBAT SIMULATION ENGINE v2.1 · NEN-AWARE · RULE-BASED</div>
</header>

<!-- Nen type legend -->
<div class="nen-legend">
  <span class="nen-chip nen-Enhancement">⬡ Enhancement</span>
  <span class="nen-chip nen-Emission">⬡ Emission</span>
  <span class="nen-chip nen-Transmutation">⬡ Transmutation</span>
  <span class="nen-chip nen-Conjuration">⬡ Conjuration</span>
  <span class="nen-chip nen-Manipulation">⬡ Manipulation</span>
  <span class="nen-chip nen-Specialization">⬡ Specialization</span>
</div>

<!-- ══ ARENA ════════════════════════════════════════════════ -->
<div class="arena">

  <!-- FIGHTER 1 -->
  <div class="fighter-card f1" id="card-f1">
    <div class="card-header">
      <span class="fighter-num">Fighter I</span>
    </div>
    <div class="card-body">
      <div class="field">
        <label class="field-label">Hunter Name</label>
        <input class="field-input" id="f1-name" type="text" placeholder="e.g. Gon Freecss" value="Gon Freecss"/>
      </div>
      <div class="field">
        <label class="field-label">Nen Type</label>
        <select class="field-select" id="f1-nen">
          <option value="Enhancement" selected>Enhancement</option>
          <option value="Emission">Emission</option>
          <option value="Transmutation">Transmutation</option>
          <option value="Conjuration">Conjuration</option>
          <option value="Manipulation">Manipulation</option>
          <option value="Specialization">Specialization</option>
        </select>
      </div>
      <div class="stats-section-title">Base Statistics</div>
      <div id="f1-stats"></div>
    </div>
  </div>

  <!-- VS -->
  <div class="vs-divider">
    <div class="vs-line"></div>
    <div class="vs-text">VS</div>
    <div class="vs-line"></div>
  </div>

  <!-- FIGHTER 2 -->
  <div class="fighter-card f2" id="card-f2">
    <div class="card-header">
      <span class="fighter-num">Fighter II</span>
    </div>
    <div class="card-body">
      <div class="field">
        <label class="field-label">Hunter Name</label>
        <input class="field-input" id="f2-name" type="text" placeholder="e.g. Killua Zoldyck" value="Killua Zoldyck"/>
      </div>
      <div class="field">
        <label class="field-label">Nen Type</label>
        <select class="field-select" id="f2-nen">
          <option value="Enhancement">Enhancement</option>
          <option value="Emission">Emission</option>
          <option value="Transmutation" selected>Transmutation</option>
          <option value="Conjuration">Conjuration</option>
          <option value="Manipulation">Manipulation</option>
          <option value="Specialization">Specialization</option>
        </select>
      </div>
      <div class="stats-section-title">Base Statistics</div>
      <div id="f2-stats"></div>
    </div>
  </div>

</div>

<!-- ══ SIMULATE BUTTON ══════════════════════════════════════ -->
<div class="simulate-wrap">
  <button class="simulate-btn" id="simulate-btn" onclick="runSimulation()">
    ◈ SIMULATE DUEL ◈
  </button>
</div>

<!-- ══ RESULT PANEL ═════════════════════════════════════════ -->
<div id="result-panel">

  <!-- Winner Banner -->
  <div class="winner-banner" id="winner-banner">
    <div class="winner-eyebrow" id="winner-eyebrow">PREDICTED VICTOR</div>
    <div class="winner-name" id="winner-name">—</div>
    <div class="winner-verdict" id="winner-verdict">—</div>

    <div class="score-bars">
      <div class="score-bar-wrap" style="text-align:right">
        <div class="score-bar-label f1-color" id="sb-name1">—</div>
        <div class="score-number f1-color" id="sb-score1">0</div>
        <div class="score-bar-track">
          <div class="score-bar-fill f1-fill" id="sb-fill1" style="width:0%"></div>
        </div>
      </div>
      <div class="score-vs-sep">◈</div>
      <div class="score-bar-wrap">
        <div class="score-bar-label f2-color" id="sb-name2">—</div>
        <div class="score-number f2-color" id="sb-score2">0</div>
        <div class="score-bar-track">
          <div class="score-bar-fill f2-fill" id="sb-fill2" style="width:0%"></div>
        </div>
      </div>
    </div>
    <div class="win-prob" id="win-prob">—</div>
  </div>

  <!-- Nen advantage notice -->
  <div class="nen-advantage-notice" id="nen-notice">—</div>

  <!-- Breakdown cards -->
  <div class="breakdown-grid">
    <div class="breakdown-card blue" id="bd-card1">
      <div class="bd-header blue" id="bd-head1">Fighter I</div>
      <div class="bd-body" id="bd-body1"></div>
    </div>
    <div class="breakdown-card red" id="bd-card2">
      <div class="bd-header red" id="bd-head2">Fighter II</div>
      <div class="bd-body" id="bd-body2"></div>
    </div>
  </div>

  <!-- Stat comparison -->
  <div class="stat-comparison" style="margin-bottom:20px">
    <div class="stat-cmp-header">STAT-BY-STAT COMPARISON</div>
    <div class="stat-cmp-body" id="stat-cmp-body"></div>
  </div>

  <!-- Calculation log -->
  <div class="calc-log">
    <div class="calc-log-header">CALCULATION LOG — STEP BY STEP ANALYSIS</div>
    <div class="calc-log-body" id="calc-log-body"></div>
  </div>

  <div class="reset-wrap">
    <button class="reset-btn" onclick="resetResult()">◂ RUN ANOTHER SIMULATION ▸</button>
  </div>
</div>

</div><!-- /app -->

<script>
/* ═══════════════════════════════════════════════════════════════
   FIGHT PREDICTOR ENGINE
   ─────────────────────────────────────────────────────────────
   STAT WEIGHTS (must sum to 1.0):
     strength     0.18  — raw physical power
     speed        0.20  — reaction + movement (critical in Nen duels)
     durability   0.14  — sustaining damage
     intelligence 0.15  — tactical advantage
     auraCapacity 0.13  — total Nen pool
     auraControl  0.13  — precision & efficiency of Nen use
     experience   0.07  — battle-tested composure

   NEN TYPE ADVANTAGE (circular rock-paper-scissors):
     Enhancement  beats  Emission
     Emission     beats  Transmutation
     Transmutation beats  Conjuration
     Conjuration  beats  Manipulation
     Manipulation beats  Enhancement
     Specialization = wildcard → 1.1× regardless of opponent

   ADVANTAGE MULTIPLIER: 1.15× applied to base score of the
   favored fighter when matchup is advantageous.
═══════════════════════════════════════════════════════════════ */

const STATS = [
  { key: 'strength',     label: 'Strength',      weight: 0.18 },
  { key: 'speed',        label: 'Speed',          weight: 0.20 },
  { key: 'durability',   label: 'Durability',     weight: 0.14 },
  { key: 'intelligence', label: 'Intelligence',   weight: 0.15 },
  { key: 'auraCapacity', label: 'Aura Capacity',  weight: 0.13 },
  { key: 'auraControl',  label: 'Aura Control',   weight: 0.13 },
  { key: 'experience',   label: 'Experience',     weight: 0.07 },
];

const NEN_ADVANTAGE = {
  Enhancement:    { beats: 'Emission',      losesTo: 'Manipulation' },
  Emission:       { beats: 'Transmutation', losesTo: 'Enhancement' },
  Transmutation:  { beats: 'Conjuration',   losesTo: 'Emission' },
  Conjuration:    { beats: 'Manipulation',  losesTo: 'Transmutation' },
  Manipulation:   { beats: 'Enhancement',   losesTo: 'Conjuration' },
  Specialization: { beats: null,            losesTo: null }, // wildcard
};

const NEN_ADVANTAGE_MULT   = 1.15;
const NEN_SPEC_MULT        = 1.10;
const NEN_NO_ADVANTAGE_MULT = 1.00;

// Default stat values
const DEFAULTS = {
  f1: { strength:82, speed:78, durability:75, intelligence:62, auraCapacity:88, auraControl:70, experience:65 },
  f2: { strength:70, speed:95, durability:68, intelligence:82, auraCapacity:76, auraControl:88, experience:75 },
};

/* ══ BUILD STAT SLIDERS ════════════════════════════════════ */
function buildSliders(containerId, fighter, defaults) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  STATS.forEach(stat => {
    const val = defaults[stat.key];
    const row = document.createElement('div');
    row.className = 'stat-row';
    row.innerHTML = `
      <span class="stat-label">${stat.label}</span>
      <input type="range" class="stat-slider" min="0" max="100" value="${val}"
             id="${fighter}-${stat.key}"
             oninput="document.getElementById('${fighter}-${stat.key}-val').textContent=this.value"/>
      <span class="stat-value" id="${fighter}-${stat.key}-val">${val}</span>`;
    container.appendChild(row);
  });
}

buildSliders('f1-stats', 'f1', DEFAULTS.f1);
buildSliders('f2-stats', 'f2', DEFAULTS.f2);

/* ══ READ FIGHTER DATA ════════════════════════════════════ */
function readFighter(prefix) {
  const name    = document.getElementById(`${prefix}-name`).value.trim() || `Fighter ${prefix === 'f1' ? 'I' : 'II'}`;
  const nenType = document.getElementById(`${prefix}-nen`).value;
  const stats   = {};
  STATS.forEach(s => {
    stats[s.key] = parseInt(document.getElementById(`${prefix}-${s.key}`).value);
  });
  return { name, nenType, stats };
}

/* ══ CALCULATE BASE SCORE ════════════════════════════════ */
function calcBaseScore(stats) {
  return STATS.reduce((sum, s) => sum + stats[s.key] * s.weight, 0);
}

/* ══ NEN MATCHUP ════════════════════════════════════════ */
function getNenResult(nenA, nenB) {
  // Returns: { multA, multB, description }
  if (nenA === 'Specialization' && nenB === 'Specialization') {
    return { multA: NEN_SPEC_MULT, multB: NEN_SPEC_MULT, desc: 'Both Specialization users — both gain the wildcard bonus.' };
  }
  if (nenA === 'Specialization') {
    return { multA: NEN_SPEC_MULT, multB: NEN_NO_ADVANTAGE_MULT,
      desc: `${nenA} is a wildcard — unpredictable against any type. Fighter I gains the Specialization bonus.` };
  }
  if (nenB === 'Specialization') {
    return { multA: NEN_NO_ADVANTAGE_MULT, multB: NEN_SPEC_MULT,
      desc: `${nenB} is a wildcard — unpredictable against any type. Fighter II gains the Specialization bonus.` };
  }

  const aDom = NEN_ADVANTAGE[nenA];
  if (aDom.beats === nenB) {
    return { multA: NEN_ADVANTAGE_MULT, multB: NEN_NO_ADVANTAGE_MULT,
      desc: `${nenA} has a type advantage over ${nenB}. Fighter I's score is amplified ×${NEN_ADVANTAGE_MULT}.` };
  }
  if (aDom.losesTo === nenB) {
    return { multA: NEN_NO_ADVANTAGE_MULT, multB: NEN_ADVANTAGE_MULT,
      desc: `${nenB} has a type advantage over ${nenA}. Fighter II's score is amplified ×${NEN_ADVANTAGE_MULT}.` };
  }
  return { multA: 1.0, multB: 1.0, desc: `${nenA} vs ${nenB} — no type advantage. Neutral matchup.` };
}

/* ══ MAIN SIMULATION ════════════════════════════════════ */
function runSimulation() {
  const f1 = readFighter('f1');
  const f2 = readFighter('f2');

  const base1 = calcBaseScore(f1.stats);
  const base2 = calcBaseScore(f2.stats);

  const nen   = getNenResult(f1.nenType, f2.nenType);

  const final1 = base1 * nen.multA;
  const final2 = base2 * nen.multB;

  const total  = final1 + final2;
  const prob1  = (final1 / total * 100).toFixed(1);
  const prob2  = (final2 / total * 100).toFixed(1);

  let winner, winnerColor;
  if (Math.abs(final1 - final2) < 0.5) {
    winner = 'DRAW';
    winnerColor = 'gold';
  } else if (final1 > final2) {
    winner = f1.name;
    winnerColor = 'blue';
  } else {
    winner = f2.name;
    winnerColor = 'red';
  }

  // ── Show result panel ──
  const panel = document.getElementById('result-panel');
  panel.style.display = 'block';
  panel.scrollIntoView({ behavior: 'smooth', block: 'start' });

  // Winner banner
  const wName = document.getElementById('winner-name');
  wName.textContent = winner === 'DRAW' ? '— DRAW —' : winner;
  wName.className = `winner-name ${winnerColor}`;

  document.getElementById('winner-eyebrow').textContent = winner === 'DRAW' ? 'COMBAT RESULT' : 'PREDICTED VICTOR';

  const margin = Math.abs(final1 - final2);
  let confidence;
  if (winner === 'DRAW') confidence = 'Scores are within margin — outcome is uncertain';
  else if (margin < 3)   confidence = 'Extremely close — outcome is highly uncertain';
  else if (margin < 8)   confidence = 'Marginal advantage — could go either way';
  else if (margin < 15)  confidence = 'Clear advantage — likely but not guaranteed';
  else                   confidence = 'Decisive advantage — high confidence prediction';

  document.getElementById('winner-verdict').textContent = confidence.toUpperCase();

  // Score bars
  document.getElementById('sb-name1').textContent  = f1.name;
  document.getElementById('sb-name2').textContent  = f2.name;
  document.getElementById('sb-score1').textContent = final1.toFixed(2);
  document.getElementById('sb-score2').textContent = final2.toFixed(2);

  const maxScore = Math.max(final1, final2);
  setTimeout(() => {
    document.getElementById('sb-fill1').style.width = `${(final1 / maxScore * 100).toFixed(1)}%`;
    document.getElementById('sb-fill2').style.width = `${(final2 / maxScore * 100).toFixed(1)}%`;
  }, 100);

  document.getElementById('win-prob').innerHTML =
    `WIN PROBABILITY — <span>${prob1}%</span> vs <span>${prob2}%</span>`;

  // Nen notice
  const notice = document.getElementById('nen-notice');
  if (nen.multA !== 1.0 || nen.multB !== 1.0) {
    notice.textContent = `⬡ NEN TYPE MATCHUP: ${nen.desc}`;
    notice.classList.add('visible');
  } else {
    notice.classList.remove('visible');
  }

  // Breakdown cards
  renderBreakdown('bd-head1', 'bd-body1', f1, base1, nen.multA, final1, 'blue');
  renderBreakdown('bd-head2', 'bd-body2', f2, base2, nen.multB, final2, 'red');

  // Stat comparison
  renderStatComparison(f1, f2);

  // Calculation log
  renderLog(f1, f2, base1, base2, nen, final1, final2, winner, prob1, prob2);

  document.getElementById('simulate-btn').disabled = true;
}

/* ══ RENDER BREAKDOWN CARD ════════════════════════════════ */
function renderBreakdown(headId, bodyId, fighter, baseScore, nenMult, finalScore, colorClass) {
  document.getElementById(headId).innerHTML =
    `<span class="${colorClass === 'blue' ? 'f1-color' : 'f2-color'}">${fighter.name}</span>
     &nbsp;<small style="color:var(--muted);font-size:10px;font-family:'Share Tech Mono',monospace;letter-spacing:1px">${fighter.nenType.toUpperCase()}</small>`;

  let html = '';
  STATS.forEach(s => {
    const contrib = (fighter.stats[s.key] * s.weight).toFixed(2);
    html += `
    <div class="bd-stat-row">
      <span class="bd-stat-name">${s.label}</span>
      <span class="bd-stat-val" style="color:var(--${colorClass === 'blue' ? 'blue' : 'crimson'})">${fighter.stats[s.key]}</span>
      <div class="bd-stat-bar-track" style="flex:1">
        <div class="bd-stat-bar-fill" style="width:${fighter.stats[s.key]}%;background:var(--${colorClass==='blue'?'blue':'crimson'})"></div>
      </div>
      <span class="bd-stat-weight" style="color:var(--muted)">×${s.weight}</span>
      <span class="bd-stat-contrib" style="color:var(--${colorClass==='blue'?'blue':'crimson'})">${contrib}</span>
    </div>`;
  });

  html += `<div class="bd-divider"></div>`;
  html += `<div class="bd-total-row">
    <span class="bd-total-label">Base Score</span>
    <span class="bd-total-val">${baseScore.toFixed(2)}</span>
  </div>`;

  if (nenMult !== 1.0) {
    html += `<div class="bd-nen-row">
      <span>Nen Multiplier</span>
      <span>×${nenMult.toFixed(2)}</span>
    </div>
    <div class="bd-nen-row" style="margin-top:2px">
      <span style="color:var(--text);font-size:13px;font-weight:700">Final Score</span>
      <span style="color:var(--gold);font-size:16px;font-weight:700">${finalScore.toFixed(2)}</span>
    </div>`;
  } else {
    html += `<div class="bd-nen-row" style="color:var(--muted)">
      <span>Nen Multiplier</span><span>×1.00 (neutral)</span>
    </div>`;
  }

  document.getElementById(bodyId).innerHTML = html;
}

/* ══ RENDER STAT COMPARISON ════════════════════════════════ */
function renderStatComparison(f1, f2) {
  const body = document.getElementById('stat-cmp-body');
  body.innerHTML = '';
  STATS.forEach(s => {
    const v1 = f1.stats[s.key];
    const v2 = f2.stats[s.key];
    const div = document.createElement('div');
    div.className = 'cmp-row';
    div.innerHTML = `
      <span class="cmp-label">${s.label}</span>
      <div class="cmp-bars">
        <div class="cmp-bar-f1" style="width:0%" data-target="${v1}"></div>
        <div class="cmp-bar-f2" style="width:0%" data-target="${v2}"></div>
      </div>
      <div class="cmp-vals">
        <span class="cmp-v1">${v1}</span>
        <span class="cmp-v2">${v2}</span>
      </div>`;
    body.appendChild(div);
  });

  setTimeout(() => {
    body.querySelectorAll('[data-target]').forEach(el => {
      el.style.width = el.dataset.target + '%';
    });
  }, 150);
}

/* ══ RENDER CALCULATION LOG ════════════════════════════════ */
function renderLog(f1, f2, base1, base2, nen, final1, final2, winner, prob1, prob2) {
  const body = document.getElementById('calc-log-body');
  body.innerHTML = '';

  const lines = [
    { text: 'INITIALIZING FIGHT PREDICTOR ENGINE v2.1…', cls: 'teal' },
    { text: '──────────────────────────────────────────────────────────', cls: 'dim' },
    { text: `FIGHTER I  : ${f1.name} [NEN TYPE: ${f1.nenType.toUpperCase()}]`, cls: 'blue' },
    { text: `FIGHTER II : ${f2.name} [NEN TYPE: ${f2.nenType.toUpperCase()}]`, cls: 'red' },
    { text: '──────────────────────────────────────────────────────────', cls: 'dim' },
    { text: 'STEP 1 — CALCULATING WEIGHTED BASE SCORES', cls: 'teal' },
    { text: '', cls: 'dim' },
    { text: `[${f1.name}] Base Score Calculation:`, cls: 'blue' },
    ...STATS.map(s => ({
      text: `  ${s.label.padEnd(16)} ${String(f1.stats[s.key]).padStart(3)} × ${s.weight.toFixed(2)} = ${(f1.stats[s.key] * s.weight).toFixed(3)}`,
      cls: ''
    })),
    { text: `  ─────────────────────────────────────────`, cls: 'dim' },
    { text: `  FIGHTER I BASE SCORE  = ${base1.toFixed(4)}`, cls: 'blue' },
    { text: '', cls: 'dim' },
    { text: `[${f2.name}] Base Score Calculation:`, cls: 'red' },
    ...STATS.map(s => ({
      text: `  ${s.label.padEnd(16)} ${String(f2.stats[s.key]).padStart(3)} × ${s.weight.toFixed(2)} = ${(f2.stats[s.key] * s.weight).toFixed(3)}`,
      cls: ''
    })),
    { text: `  ─────────────────────────────────────────`, cls: 'dim' },
    { text: `  FIGHTER II BASE SCORE = ${base2.toFixed(4)}`, cls: 'red' },
    { text: '', cls: 'dim' },
    { text: 'STEP 2 — NEN TYPE ADVANTAGE ANALYSIS', cls: 'teal' },
    { text: `  Fighter I  : ${f1.nenType}`, cls: 'blue' },
    { text: `  Fighter II : ${f2.nenType}`, cls: 'red' },
    { text: `  MATCHUP    : ${nen.desc}`, cls: 'gold' },
    { text: `  Multiplier I  : ×${nen.multA.toFixed(2)}`, cls: nen.multA > 1 ? 'blue' : 'dim' },
    { text: `  Multiplier II : ×${nen.multB.toFixed(2)}`, cls: nen.multB > 1 ? 'red'  : 'dim' },
    { text: '', cls: 'dim' },
    { text: 'STEP 3 — APPLYING NEN MULTIPLIERS', cls: 'teal' },
    { text: `  Final Score I  = ${base1.toFixed(4)} × ${nen.multA.toFixed(2)} = ${final1.toFixed(4)}`, cls: 'blue' },
    { text: `  Final Score II = ${base2.toFixed(4)} × ${nen.multB.toFixed(2)} = ${final2.toFixed(4)}`, cls: 'red' },
    { text: '', cls: 'dim' },
    { text: 'STEP 4 — WIN PROBABILITY', cls: 'teal' },
    { text: `  Total Score Pool = ${(final1 + final2).toFixed(4)}`, cls: '' },
    { text: `  P(${f1.name.slice(0,12)}) = ${final1.toFixed(4)} / ${(final1+final2).toFixed(4)} = ${prob1}%`, cls: 'blue' },
    { text: `  P(${f2.name.slice(0,12)}) = ${final2.toFixed(4)} / ${(final1+final2).toFixed(4)} = ${prob2}%`, cls: 'red' },
    { text: '', cls: 'dim' },
    { text: '──────────────────────────────────────────────────────────', cls: 'dim' },
    { text: winner === 'DRAW'
        ? '  RESULT: DRAW — SCORES WITHIN MARGIN OF CERTAINTY'
        : `  PREDICTED VICTOR: ${winner.toUpperCase()} (${winner === f1.name ? prob1 : prob2}% win probability)`,
      cls: winner === 'DRAW' ? 'gold' : (winner === f1.name ? 'blue' : 'red') },
    { text: '──────────────────────────────────────────────────────────', cls: 'dim' },
    { text: 'SIMULATION COMPLETE.', cls: 'green' },
  ];

  lines.forEach((line, i) => {
    const div = document.createElement('div');
    div.className = 'log-line';
    div.style.animationDelay = `${i * 35}ms`;
    div.innerHTML = `<span class="log-prefix">›</span><span class="log-text ${line.cls}">${line.text || '&nbsp;'}</span>`;
    body.appendChild(div);
  });

  // Auto scroll to bottom after animation
  setTimeout(() => { body.scrollTop = body.scrollHeight; }, lines.length * 40);
}

/* ══ RESET ════════════════════════════════════════════════ */
function resetResult() {
  document.getElementById('result-panel').style.display = 'none';
  document.getElementById('simulate-btn').disabled = false;
  document.getElementById('sb-fill1').style.width = '0%';
  document.getElementById('sb-fill2').style.width = '0%';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
